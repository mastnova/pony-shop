(this["webpackJsonppony-shop"]=this["webpackJsonppony-shop"]||[]).push([[0],[,,,function(e,t,n){e.exports={content:"BasketModal_content__29d-u",productRow:"BasketModal_productRow__6tUYG",productPrice:"BasketModal_productPrice__qim_Y",summary:"BasketModal_summary__23T2O",alert:"BasketModal_alert__1P9nz"}},function(e,t,n){e.exports={filters:"FiltersModal_filters__1K7ZS",row:"FiltersModal_row__gbMQZ",button:"FiltersModal_button__1p4Rt"}},function(e,t,n){e.exports={card:"ProductCard_card__14FPA",subtitle:"ProductCard_subtitle__1jUId",thumbnail:"ProductCard_thumbnail__2jSaI",labelNew:"ProductCard_labelNew__H2GtS",price:"ProductCard_price__yDmtw"}},,function(e,t,n){e.exports={wrapper:"Modal_wrapper__3hVN1",layout:"Modal_layout__2wPfe",modal:"Modal_modal__1UXHZ",title:"Modal_title__1RpPo",closeButton:"Modal_closeButton__3bgXe",content:"Modal_content__1ypzp"}},,,,,,function(e,t,n){e.exports={showcase:"Showcase_showcase__K-Q2c",content:"Showcase_content__3Usz6",pagination:"Showcase_pagination__3smgE"}},,,function(e,t,n){e.exports={pagination:"Pagination_pagination__248IU",active:"Pagination_active__TF9pF"}},function(e,t,n){e.exports={app:"App_app__1kX79",topBar:"App_topBar__aK-uF"}},function(e,t,n){e.exports={default:"Button_default__3Zlg-",action:"Button_action__7BEaK",link:"Button_link__3eKQO",danger:"Button_danger__311uS",success:"Button_success__3UXPA"}},,function(e,t,n){e.exports={overlay:"Overlay_overlay__2WtGP"}},,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(9),s=n.n(r),i=n(6),o=n(21),l=n(1),d=n(12),u=n(18),j=n.n(u),b=n(0);function h(e){var t=e.variant,n=void 0===t?"default":t,a=e.children,c=e.className,r=Object(d.a)(e,["variant","children","className"]),s=c?" ".concat(c):"";return Object(b.jsx)("button",Object(l.a)(Object(l.a)({className:"".concat(j.a[n]).concat(s)},r),{},{children:a}))}var p=n(15),O=n.n(p),_=n(19),m=n(20),v=n.n(m);function x(e){var t=e.children,n=e.show,c=e.onClose,r=Object(a.useRef)();if(n&&!r.current){var i=document.createElement("div");document.body.appendChild(i),document.body.style.overflow="hidden",r.current=i}Object(a.useEffect)((function(){!n&&r.current&&(r.current.remove(),r.current=null,document.body.style.overflow="visible")}),[n]);return n?s.a.createPortal(Object(b.jsx)("div",{className:v.a.overlay,onClick:function(){c&&c()},children:t}),r.current):null}var f=n(7),w=n.n(f);function g(e){var t=e.title,n=e.children,a=Object(d.a)(e,["title","children"]);return Object(b.jsx)(x,Object(l.a)(Object(l.a)({},a),{},{children:Object(b.jsx)("div",{className:w.a.wrapper,children:Object(b.jsx)("div",{className:w.a.layout,children:Object(b.jsxs)("div",{className:w.a.modal,onClick:function(e){return e.stopPropagation()},children:[Object(b.jsx)("div",{className:w.a.closeButton,onClick:a.onClose,children:"+"}),Object(b.jsx)("h2",{className:w.a.title,children:t}),Object(b.jsx)("div",{className:w.a.content,children:n})]})})})}))}var k=["\u0422\u0432\u0430\u0439\u043b\u0430\u0439\u0442","\u042d\u043f\u043f\u043b\u0434\u0436\u0435\u043a","\u0420\u044d\u0439\u043d\u0431\u043e\u0443","\u0420\u0430\u0440\u0438\u0442\u0438","\u0424\u043b\u0430\u0442\u0442\u0435\u0440\u0448\u0430\u0439","\u041f\u0438\u043d\u043a\u0438\u043f\u0430\u0439"],y=["\u0424\u0438\u043e\u043b\u0435\u0442\u043e\u0432\u044b\u0439","\u0420\u043e\u0437\u043e\u0432\u044b\u0439","\u0416\u0435\u043b\u0442\u044b\u0439","\u0411\u0435\u043b\u044b\u0439","\u0413\u043e\u043b\u0443\u0431\u043e\u0439","\u041e\u0440\u0430\u043d\u0436\u0435\u0432\u044b\u0439"],N=["\u0417\u0435\u043c\u043d\u0430\u044f \u043f\u043e\u043d\u0438","\u0415\u0434\u0438\u043d\u043e\u0440\u043e\u0433","\u041f\u0435\u0433\u0430\u0441","\u0410\u043b\u0438\u043a\u043e\u0440\u043d","\u041a\u0438\u0440\u0438\u043d","\u0427\u0435\u0439\u043d\u0434\u0436\u043b\u0438\u043d\u0433"];var P=function(){return Promise.resolve()},C=n(3),M=n.n(C);function B(e){var t=e.show,n=e.products,c=Object(a.useContext)(V),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(a.useState)(window.navigator.onLine),u=Object(i.a)(d,2),j=u[0],p=u[1];Object(a.useEffect)((function(){var e=function(){return p(!0)},t=function(){return p(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]);var m=n.reduce((function(e,t){return e+t.price}),0),v={},x=[];n.forEach((function(e){v[e.id]?v[e.id]+=1:(v[e.id]=1,x.push(e))}));var f,w=function(){var e=Object(_.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({products:n});case 2:c({type:"clear_basket"}),l(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){l(!1),c({type:"show_basket",payload:!1})};return f=o?Object(b.jsxs)("div",{className:M.a.content,children:[Object(b.jsx)("p",{children:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0441 \u043f\u043e\u043a\u0443\u043f\u043a\u043e\u0439!"}),Object(b.jsx)(h,{variant:"success",onClick:k,children:"OK"})]}):n.length?Object(b.jsxs)("div",{className:M.a.content,children:[x.map((function(e){return Object(b.jsxs)("div",{className:M.a.productRow,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("b",{children:e.name})," - ",v[e.id]," \u0448\u0442."]}),Object(b.jsxs)("span",{children:[Object(b.jsxs)("span",{className:M.a.productPrice,children:[e.price*v[e.id]," \u20bd"]}),Object(b.jsx)(h,{variant:"danger",onClick:function(){return c({type:"remove_product",payload:e.id})},children:"X"})]})]},e.id)})),Object(b.jsxs)("div",{className:M.a.summary,children:[Object(b.jsxs)("div",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",n.length," \u0448\u0442."]}),Object(b.jsxs)("div",{children:["\u0418\u0442\u043e\u0433\u043e: ",Object(b.jsxs)("b",{children:[m," \u20bd"]})]})]}),Object(b.jsx)(h,{variant:"action",onClick:w,disabled:!j,children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),!j&&Object(b.jsx)("div",{className:M.a.alert,children:"\u041d\u0435\u0442 \u0441\u0435\u0442\u0438! \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443"})]}):Object(b.jsxs)("div",{className:M.a.content,children:[Object(b.jsx)("p",{children:"\u0422\u0443\u0442 \u043f\u0443\u0441\u0442\u043e! \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!"}),Object(b.jsx)(h,{variant:"success",onClick:k,children:"OK"})]}),Object(b.jsx)(g,{title:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",show:t,onClose:k,children:f})}var S=n(11),E=n(4),F=n.n(E);function K(e){var t=e.show,n=e.initialFilters,c=Object(a.useState)(n),r=Object(i.a)(c,2),s=r[0],o=r[1],d=Object(a.useContext)(V),u=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value;o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(S.a)({},t.name,n))}))},j=function(){d({type:"show_filters",payload:!1})};return Object(b.jsx)(g,{title:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b",show:t,onClose:j,children:Object(b.jsxs)("form",{className:F.a.filters,onSubmit:function(e){e.preventDefault(),d({type:"change_filters",payload:s}),d({type:"change_page",payload:1}),j()},children:[Object(b.jsxs)("div",{className:F.a.row,children:[Object(b.jsx)("label",{children:"\u0426\u0432\u0435\u0442"}),Object(b.jsxs)("select",{name:"color",value:s.color,onChange:u,children:[Object(b.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0446\u0432\u0435\u0442\u0430"}),y.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))]})]}),Object(b.jsxs)("div",{className:F.a.row,children:[Object(b.jsx)("label",{children:"\u0412\u0438\u0434"}),Object(b.jsxs)("select",{name:"kind",value:s.kind,onChange:u,children:[Object(b.jsx)("option",{value:"",children:"\u0412\u0441\u0435 \u0432\u0438\u0434\u044b"}),N.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))]})]}),Object(b.jsxs)("div",{className:F.a.row,children:[Object(b.jsx)("label",{children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430"}),Object(b.jsx)("input",{name:"minPrice",type:"range",min:"0",max:"1000",step:"1",value:s.minPrice,onChange:u}),s.minPrice]}),Object(b.jsxs)("div",{className:F.a.row,children:[Object(b.jsx)("label",{children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0446\u0435\u043d\u0430"}),Object(b.jsx)("input",{name:"maxPrice",type:"range",min:"0",max:"1000",step:"1",value:s.maxPrice,onChange:u}),s.maxPrice]}),Object(b.jsx)("div",{className:F.a.row,children:Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{name:"onlyNew",type:"checkbox",checked:s.onlyNew,onChange:u}),"\u0442\u043e\u043b\u044c\u043a\u043e \u043d\u043e\u0432\u0438\u043d\u043a\u0438"]})}),Object(b.jsx)("div",{className:F.a.button,children:Object(b.jsx)(h,{variant:"action",type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})})]})})}var R=n(16),A=n.n(R);function I(e){var t=e.count,n=e.currentPage,a=e.itemsPerPage,c=e.onChange,r=Math.ceil(t/a);return r<2?null:Object(b.jsxs)("div",{className:A.a.pagination,children:[Object(b.jsx)(h,{onClick:function(){n>1&&c(n-1)},disabled:1===n,children:"<"}),Array(r).fill().map((function(e,t){var a=t+1;return Object(b.jsx)("span",{className:a===n?A.a.active:"",onClick:function(){return c(a)},children:a},a)})),Object(b.jsx)(h,{onClick:function(){n<r&&c(n+1)},disabled:n===r,children:">"})]})}var U=n.p+"static/media/thumbnail.7d83689f.png",L=n(5),X=n.n(L);function J(e){var t=e.product,n=e.handler;return Object(b.jsxs)("div",{className:X.a.card,children:[t.is_new&&Object(b.jsx)("div",{className:X.a.labelNew,children:"new"}),Object(b.jsx)("h3",{className:X.a.title,children:t.name}),Object(b.jsx)("div",{className:X.a.subtitle,children:t.kind}),Object(b.jsx)("img",{className:X.a.thumbnail,src:U,alt:"product thumbnail"}),Object(b.jsx)("div",{className:X.a.subtitle,children:t.color}),Object(b.jsxs)("div",{className:X.a.price,children:[t.price," \u20bd"]}),Object(b.jsx)(h,{variant:"action",onClick:n,children:"\u043a\u0443\u043f\u0438\u0442\u044c"})]})}var Z=n(13),z=n.n(Z);function G(e){var t=e.products,n=e.currentPage,c=e.itemsPerPage,r=Object(a.useContext)(V),s=(n-1)*c,i=t.slice(s,s+c);return Object(b.jsxs)("div",{className:z.a.showcase,children:[Object(b.jsx)("div",{className:z.a.content,children:i.map((function(e){return Object(b.jsx)(J,{product:e,handler:function(){return r({type:"add_product",payload:e})}},e.id)}))}),Object(b.jsx)("div",{className:z.a.pagination,children:Object(b.jsx)(I,{count:t.length,currentPage:n,itemsPerPage:c,onChange:function(e){return r({type:"change_page",payload:e})}})})]})}var Q=n(17),D=n.n(Q),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=function(e){return e[Math.floor(Math.random()*e.length)]};return Array(e).fill().map((function(e,n){return{id:n+1,name:t(k),color:t(y),kind:t(N),price:Math.floor(800*Math.random()+100),is_new:t([!0,!1])}}))}(60),T=localStorage.getItem("basket"),Y={basket:T?JSON.parse(T):[],currentPage:1,itemsPerPage:20,filters:{color:"",kind:"",minPrice:0,maxPrice:1e3,onlyNew:!1},showFilters:!1,showBasket:!1};function q(e,t){switch(t.type){case"add_product":return Object(l.a)(Object(l.a)({},e),{},{basket:[].concat(Object(o.a)(e.basket),[t.payload])});case"remove_product":return Object(l.a)(Object(l.a)({},e),{},{basket:e.basket.filter((function(e){return e.id!==t.payload}))});case"clear_basket":return Object(l.a)(Object(l.a)({},e),{},{basket:[]});case"change_page":return Object(l.a)(Object(l.a)({},e),{},{currentPage:t.payload});case"change_filters":return Object(l.a)(Object(l.a)({},e),{},{filters:t.payload});case"show_filters":return Object(l.a)(Object(l.a)({},e),{},{showFilters:t.payload});case"show_basket":return Object(l.a)(Object(l.a)({},e),{},{showBasket:t.payload});default:throw new Error}}var V=c.a.createContext(null);var W=function(){var e=Object(a.useReducer)(q,Y),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useMemo)((function(){return e=n.filters,H.filter((function(t){return(!e.color||t.color===e.color)&&(!e.kind||t.kind===e.kind)&&e.minPrice<=t.price&&t.price<=e.maxPrice&&(!e.onlyNew||t.is_new)}));var e}),[n.filters]);return Object(a.useEffect)((function(){localStorage.setItem("basket",JSON.stringify(n.basket))}),[n.basket]),Object(b.jsx)(V.Provider,{value:c,children:Object(b.jsxs)("div",{className:D.a.app,children:[Object(b.jsxs)("div",{className:D.a.topBar,children:[Object(b.jsx)(h,{onClick:function(){return c({type:"show_filters",payload:!0})},variant:"link",children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),Object(b.jsxs)("span",{children:[Object(b.jsx)(h,{onClick:function(){return c({type:"show_basket",payload:!0})},variant:"link",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),!!n.basket.length&&Object(b.jsx)("span",{className:"badge",children:n.basket.length})]})]}),Object(b.jsx)(G,{products:r,currentPage:n.currentPage,itemsPerPage:n.itemsPerPage}),Object(b.jsx)(K,{show:n.showFilters,initialFilters:n.filters}),Object(b.jsx)(B,{show:n.showBasket,products:n.basket})]})})};n(28);s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.1b721ac2.chunk.js.map